### 作用

- 集群监控
- 消息通知：如果有机器宕机就告知管理员
- 故障转移：master挂了就拿slave顶上
- 配置中心：故障转移后，告知客户端新master的地址

判断一个master是否宕机，需要得到多数哨兵的同意，所以至少需要3个哨兵实例



### 哨兵主备切换导致数据丢失

#### 原因

- 主从复制是异步的，所以可能会丢失数据
- 脑裂导致数据丢失：client不知道主从切换了，所以继续向其发送数据，导致数据丢失

#### 解决办法

- 配置最少有一个slave时才能写入数据
- 主从延迟不超过 10 秒：防止丢失数据过多