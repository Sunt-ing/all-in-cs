### **引言**

近年来，随着社交网络与语义网的发展，基于互联网的**图数据**规模越来越大。截止到 2017 年底，微信已经有了将近 10 亿的活跃用户，这些用户相互关联与通信，仅在 2016 年春节期间，用户之间就互相分发了 32 亿个红包 [[33](http://www.jos.org.cn/html/2019/1/5646.htm#b33)]. 在语义网的 Linked Open Data 项目中，已有超过 **1 184 个 RDF 图数据集**，合计超过 **800 亿条边** [[34](http://www.jos.org.cn/html/2019/1/5646.htm#b34)]. 针对这些规模巨大的图数据，设计与实现高效的图数据管理系统成为一个很重要的研究热点.

现阶段，工业界和学术界已经设计并实现了不少大规模图数据管理系统。按照对图数据管理的抽象程度，可以将其分成如下两类.

● 低层次抽象的提供编程接口的图数据管理系统：这类系统会**针对图数据管理中的基本操作设计**并实现相应的编程接口，用户利用这些编程接口来实现相应的管理功能；

● 高层次抽象的提供描述性查询语言的图数据管理系统：这类系统**设计图数据管理描述性查询语言**，用户将相应的管理需求用描述性查询语言表达，系统解析这些描述性查询语句并生成相应的查询计划以进行执行处理.

![image-20210414110133959](C:%5CUsers%5C23779%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210414110133959.png)

### **主要研究问题**

针对大规模图数据处理，主要有以下几个常见问题.

● **图搜索**：给定一个图，从一个点出发沿着边搜索其他所有节点。常见的图搜素方法有**宽度优先、深度优先和最短路径**等。图搜索是图计算问题的基础，用于衡量图计算的 Benchmark Graph500[[35](http://www.jos.org.cn/html/2019/1/5646.htm#b35)] 就是以宽度优先搜索性能作为评测机器的图计算能力的标准；

● 基于图的**社区发现**：社区发现是社交网络分析中一个重要的任务，用于**分析网络图中的密集子图**。这对于理解社交网络中的用户行为和朋友推荐等都具有非常重要的应用价值，典型的社区发现算法有 *K*-core[[36](http://www.jos.org.cn/html/2019/1/5646.htm#b36)]、*K*-truss[[37](http://www.jos.org.cn/html/2019/1/5646.htm#b37)] 以及 *K*-clique[[38](http://www.jos.org.cn/html/2019/1/5646.htm#b38)];

● **图节点的重要性和相关性分析**：计算图中某个节点的重要程度，例如在**网页链接图中分析网页的重要程度**，代表性工作是 Pagerank[[39](http://www.jos.org.cn/html/2019/1/5646.htm#b39)]; **衡量图上两个节点的相关性，例如社交网络中两个人之间的关系**，代表工作包括 SimRank[[40](http://www.jos.org.cn/html/2019/1/5646.htm#b40)] 和 Random Walk[[41](http://www.jos.org.cn/html/2019/1/5646.htm#b41)] 等；

● **图匹配查询**：给定数据图和查询图，图匹配查询找出**所有在数据图上与查询图同构的子图**，这个问题常用于描述针对图结构的查询。图匹配查询的应用包括化学分子库中的分子拓扑结构查询 [[42](http://www.jos.org.cn/html/2019/1/5646.htm#b42)]、在一个社交网络图中的特定社交结构查询 [[43](http://www.jos.org.cn/html/2019/1/5646.htm#b43)] 等。面向 RDF 知识图谱数据的 **SPARQL 查询语言就是基于子图匹配的查询语义** [[44](http://www.jos.org.cn/html/2019/1/5646.htm#b44), [45](http://www.jos.org.cn/html/2019/1/5646.htm#b45)].

### **国内外研究现状**

#### **低层次抽象的提供编程接口的图数据管理系统**

提供低层次抽象编程接口的图数据管理系统包括 Pregel[[46](http://www.jos.org.cn/html/2019/1/5646.htm#b46)] 及其衍生 [[47](http://www.jos.org.cn/html/2019/1/5646.htm#b47)-[51](http://www.jos.org.cn/html/2019/1/5646.htm#b51)]、Trinity[[52](http://www.jos.org.cn/html/2019/1/5646.htm#b52)]、GraphX[[53](http://www.jos.org.cn/html/2019/1/5646.htm#b53)] 等；系统会将常见的图运算中的基本操作抽象成编程接口。虽然这类系统**屏蔽了包括图数据的内部数据结构表示、分布式环境下的通信处理等底层系统问题**，但是由于是低层次抽象的编程接口，用户还需要将具体的图计算任务转换成系统提供的低层次抽象编程接口逻辑.

这类系统中典型的是 “**点计算模型**”, 即**允许用户定义每个点的计算任务**。最早的系统是谷歌提出的一种分布式图数据管理系统 Pregel[[46](http://www.jos.org.cn/html/2019/1/5646.htm#b46)], 该系统基于 BSP 分布式计算模型 [[54](http://www.jos.org.cn/html/2019/1/5646.htm#b54)] 进行设计，图数据的每个点为基本计算核心，机器之间通过消息传递来实现同步.Pregel 将图运算用一系列的超级计算步 (superstep) 来描述，**在运算每一次超级计算步时，每一个顶点都能接收来自上一次超级计算步的信息，然后将这些信息传送给下一个顶点，并在此过程中修改其自身的状态信息 (例如以该顶点为起点的出边状态信息) 或改变整个图的拓扑结构**.Pregel 系统将不同机器的通信进行了封装，用户需要通过编程来描述点计算函数进而实现自身的需求.

Pregel 的基于 BSP 的点计算模型得到了工业界以及学术界的广泛关注与认可。很多人在 Pregel 上开发了效率更高的系统，包括 Giraph[[47](http://www.jos.org.cn/html/2019/1/5646.htm#b47)]、PowerGraph[[48](http://www.jos.org.cn/html/2019/1/5646.htm#b48)]、GraphLab[[49](http://www.jos.org.cn/html/2019/1/5646.htm#b49)]、Quegel[[50](http://www.jos.org.cn/html/2019/1/5646.htm#b50)]、PAGE[[51](http://www.jos.org.cn/html/2019/1/5646.htm#b51)] 等.

除了基于 “点计算” 的图计算系统，Trinity[[52](http://www.jos.org.cn/html/2019/1/5646.htm#b52)] 是微软研发的一个基于内存的分布式图数据管理系统.Trinity 认为：随着时代的发展，一方面内存越来越大且越来越便宜；另一方面，图数据上的基本操作非常复杂，将数据存储在外存会导致操作不便，所以利用内存进行图数据管理才是更好的选择。因为单机内存规模总是有限的，所以 Trinity 使用了内存云的技术，也就是将多台机器的内存封装起来，使得用户能够同时使用多台机器的内存，而且无需知道底层细节.Trinity 的基本数据结构是键值对，可以通过邻接表的形式存储与管理数据图，用户通过编程调用内存中的邻接表来实现自身需求.

GraphX[[53](http://www.jos.org.cn/html/2019/1/5646.htm#b53)] 将图计算任务分成两种：图并行计算任务 (graph-parallel computation) 和数据并行计算任务 (data-parallel computation). 所谓**图并行计算任务，主要是指基于 BSP 点计算模型来实现的迭代计算任务，如 PageRank**; 所谓**数据并行计算任务，主要是指图上代数运算，如构建一个图、合并两个图、跨越多个图等等**.GraphX 的作者认为：现有的图计算系统 (如 Pregel[[46](http://www.jos.org.cn/html/2019/1/5646.htm#b46)]、GraphLab[[49](http://www.jos.org.cn/html/2019/1/5646.htm#b49)]) 通过限定编程框架的形式来提高图并行计算任务的执行效率，但是这些系统并不适合数据并行计算任务。基于上述观察，GraphX 在分布式计算平台 Spark[[55](http://www.jos.org.cn/html/2019/1/5646.htm#b55)] 的基础上构建了 GraphX, 以同时处理图并行计算任务和数据并行计算任务.GraphX 以图为第 1 类组成对象，以属性图为数据模型。所谓属性图，就是每个点和每条边都可以关联一个属性值表.GraphX 定义了很多图上的操作。既包括一些图并行计算任务，如 Pregel 等，也包括一些数据并行计算任务，如 map、filter 等.

#### **高层次抽象的提供描述性语言的图数据管理系统**

所谓高层次抽象的提供描述性查询语言的图数据管理系统包括 **Neo4J[[56](http://www.jos.org.cn/html/2019/1/5646.htm#b56)]、EmptyHeaded[[57](http://www.jos.org.cn/html/2019/1/5646.htm#b57), [58](http://www.jos.org.cn/html/2019/1/5646.htm#b58)]、gStore[[44](http://www.jos.org.cn/html/2019/1/5646.htm#b44), [45](http://www.jos.org.cn/html/2019/1/5646.htm#b45), [59](http://www.jos.org.cn/html/2019/1/5646.htm#b59)]** 等。这些系统为了方便用户对图数据的使用，在构建图数据管理系统的基础上，设计或者采用了一些描述性查询管理语言。用户可以将自身的需求表达成描述性语句，然后系统将这些任务语句解析成执行计划，最后由系统按照执行计划进行处理进而得到计算结果。因为这类系统用描述性查询语言作为用户和系统的交互中介，所以这类系统具有较好的用户友好性.

Neo4J[[56](http://www.jos.org.cn/html/2019/1/5646.htm#b56)] 是一个由美国 Neo Technology 公司开发的基于 Java 平台的开源图数据管理系统，具有如下 4 个特点：**支持满足 ACID 特性的事务操作、很好的可用性、很高的可扩展性、支持高效率遍历查询.Neo4J 的描述性查询语言是 Cypher**[[60](http://www.jos.org.cn/html/2019/1/5646.htm#b60)], 适合于开发者和在数据库上进行查询的数据专业操作人员。针对实际中各种应用需求，Cyper 定义不同的方法来描述与表达.Cyper 的许多关键字受 SQL 的启发，如 like 和 order by, 它是一个申明式的语言，焦点在如何从图中找回 (what to retrieve), 而不是怎么去做。在不公布实现细节的前提下，用户关心如何查询优化.

EmptyHeaded[[57](http://www.jos.org.cn/html/2019/1/5646.htm#b57), [58](http://www.jos.org.cn/html/2019/1/5646.htm#b58)] 是由斯坦福大学开发的图数据管理系统，这个系统首先将图上的计算任务转化成边的连接操作，然后利用现有关系数据库关于多路连接的最新研究成果 [[61](http://www.jos.org.cn/html/2019/1/5646.htm#b61)] 找出最优的多路连接查询执行计划。**在查询执行阶段，EmptyHeaded 利用 SIMD 技术来提高查询执行效率**.EmptyHeaded 提出了自己的描述性查询语言，主要整合了联合查询、聚集操作和迭代运算，支持常见的子图匹配、PageRank 计算、最短路径计算等.

随着语义网的发展，越来越多的数据被表示成 RDF (resource description framework, 即资源描述框架)[[62](http://www.jos.org.cn/html/2019/1/5646.htm#b62)] 形式发布到网络上。在 RDF 模型下，网络资源及其关系也可以被表示成一个图，方便用户利用图技术进行数据表示与管理。**针对 RDF 数据，已经有推荐的描述性结构化查询语言 SPARQL (simple protocol and RDF query language)[[63](http://www.jos.org.cn/html/2019/1/5646.htm#b63)], 可以实现大规模 RDF 的数据管理.**

针对 RDF 知识图谱的数据管理，可以采用基于关系数据库的方法，也可以采用图计算的策略。利用 RDF 知识图谱的图结构特性来管理数据，代表性系统有基于图的 RDF 知识图谱数据管理系统 gStore[[44](http://www.jos.org.cn/html/2019/1/5646.htm#b44), [45](http://www.jos.org.cn/html/2019/1/5646.htm#b45), [59](http://www.jos.org.cn/html/2019/1/5646.htm#b59)] 和支持自然语言问句的 RDF 知识图谱检索系统 gAnswer[[64](http://www.jos.org.cn/html/2019/1/5646.htm#b64)].

### **总结与展望**

本文分类阐述了两类图数据管理方法，对图数据计算任务进行了不同程度的抽象，进而提出了不同的交互方式。研究人员也提出了一些新的研究问题，包括在异构计算环境下的图数据管理问题，例如，如何利用新型高性能计算芯片 FPGA 进行图数据处理。**异构计算环境下的图数据计算问题是一个开放性研究课题**，同时，在传感器、社交网络等环境下的图数据管理问题具有多源且实时更新的特点，面对多源的流式图数据管理也是图数据管理所面临的新的挑战.

















































